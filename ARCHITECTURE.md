# ï¿½ï¸ System Architecture - Financial Planner AI

Comprehensive technical architecture documentation for the Agentic AI Financial Planning System.

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT BROWSER (Frontend)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ index.html (200 lines)                                            â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚                    USER INTERFACE                            â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                                                              â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  Landing Page          Results Page       Chat Interface     â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚ Select   â”‚  â”€â”€â”€â”€â”€> â”‚Executive â”‚       â”‚ Conversationâ”‚   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚ Plans    â”‚         â”‚Summary   â”‚       â”‚   History   â”‚   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚ & Form   â”‚         â”‚+ Charts  â”‚       â”‚             â”‚   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚+ Details â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚ style.css (500 lines)          app.js (400 lines)                â”‚ â”‚
â”‚  â”‚ â€¢ Responsive Design            â€¢ Form Handling                   â”‚ â”‚
â”‚  â”‚ â€¢ Animations                   â€¢ API Calls                       â”‚ â”‚
â”‚  â”‚ â€¢ Color Scheme                 â€¢ Chart Rendering                 â”‚ â”‚
â”‚  â”‚ â€¢ Mobile Support               â€¢ Chat Logic                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP/REST API
                         â”‚ JSON Requests/Responses
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLASK WEB SERVER (Backend)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ app.py (160 lines)                                                â”‚ â”‚
â”‚  â”‚ REST API Endpoints:                                               â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚ GET  /              â†’ Serve index.html                            â”‚ â”‚
â”‚  â”‚ GET  /api/plans     â†’ Return available plans                      â”‚ â”‚
â”‚  â”‚ POST /api/planning/start  â†’ Generate plan                         â”‚ â”‚
â”‚  â”‚ GET  /api/planning/<id>   â†’ Get results                           â”‚ â”‚
â”‚  â”‚ POST /api/chat/<id>       â†’ Chat response                         â”‚ â”‚
â”‚  â”‚ GET  /api/export/<id>     â†’ Export JSON                           â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚ Session Management                                        â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Store planning results                                  â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Maintain chat history                                   â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ User profile data                                       â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚ config.py (60 lines)                                              â”‚ â”‚
â”‚  â”‚ â€¢ Environment configuration                                       â”‚ â”‚
â”‚  â”‚ â€¢ Flask settings                                                  â”‚ â”‚
â”‚  â”‚ â€¢ Security settings                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ agents.py (360 lines)â”‚    â”‚visualizations.py       â”‚                â”‚
â”‚  â”‚                      â”‚    â”‚(440 lines)             â”‚                â”‚
â”‚  â”‚ AI Agents:           â”‚    â”‚                        â”‚                â”‚
â”‚  â”‚                      â”‚    â”‚ Chart Functions:       â”‚                â”‚
â”‚  â”‚ â€¢ RetirementAgent    â”‚    â”‚ â€¢ Net Worth Chart      â”‚                â”‚
â”‚  â”‚ â€¢ InsuranceAgent     â”‚    â”‚ â€¢ Retirement Chart     â”‚                â”‚
â”‚  â”‚ â€¢ EstateAgent        â”‚    â”‚ â€¢ Allocation Pie       â”‚                â”‚
â”‚  â”‚ â€¢ WealthAgent        â”‚    â”‚ â€¢ Insurance Chart      â”‚                â”‚
â”‚  â”‚ â€¢ OrchestratorAgent  â”‚    â”‚ â€¢ Education Chart      â”‚                â”‚
â”‚  â”‚                      â”‚    â”‚ â€¢ Budget Breakdown     â”‚                â”‚
â”‚  â”‚ Tools:               â”‚    â”‚ (All return JSON)      â”‚                â”‚
â”‚  â”‚ â€¢ calculate_retire..â”‚    â”‚                        â”‚                â”‚
â”‚  â”‚ â€¢ calculate_life_in.â”‚    â”‚ Dependencies:           â”‚                â”‚
â”‚  â”‚ â€¢ calculate_educat..â”‚    â”‚ â€¢ Plotly 5.18.0        â”‚                â”‚
â”‚  â”‚ â€¢ calculate_estate..â”‚    â”‚ â€¢ NumPy 1.24.3         â”‚                â”‚
â”‚  â”‚ â€¢ calculate_wealth..â”‚    â”‚                        â”‚                â”‚
â”‚  â”‚                      â”‚    â”‚                        â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTPS API Call
                         â”‚ with OpenAI API key
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      EXTERNAL SERVICES                                  â”‚
â”‚                                                                         â”‚
â”‚  OpenAI (GPT-4o-mini)                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Process:                                                        â”‚  â”‚
â”‚  â”‚ 1. Receive user profile & selected plans                       â”‚  â”‚
â”‚  â”‚ 2. LangChain constructs prompts                                â”‚  â”‚
â”‚  â”‚ 3. GPT-4o-mini generates recommendations                       â”‚  â”‚
â”‚  â”‚ 4. Tools (calculate_*) execute with user data                 â”‚  â”‚
â”‚  â”‚ 5. Return structured financial advice                          â”‚  â”‚
â”‚  â”‚ 6. Plotly generates visualizations                             â”‚  â”‚
â”‚  â”‚ 7. All returned as JSON to frontend                            â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ Libraries:                                                      â”‚  â”‚
â”‚  â”‚ â€¢ langchain 0.1.10  - Agent framework                          â”‚  â”‚
â”‚  â”‚ â€¢ langchain-openai  - OpenAI integration                       â”‚  â”‚
â”‚  â”‚ â€¢ langgraph 0.0.20  - Agent orchestration                      â”‚  â”‚
â”‚  â”‚ â€¢ openai 1.3.8      - API client                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
USER ACTION                 FRONTEND              API SERVER          EXTERNAL
                                                                     (OpenAI)
   â”‚
   â”œâ”€â”€> Select Plans â”€â”€â”€â”€â”€â”€> Show/Hide Forms
   â”‚
   â”œâ”€â”€> Fill Form â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Validate Input
   â”‚
   â”œâ”€â”€> Submit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> POST /api/planning/start
   â”‚                                         â”‚
   â”‚                                         â”œâ”€â”€> Create OrchestratorAgent
   â”‚                                         â”‚
   â”‚                                         â”œâ”€â”€> Route to Selected Agents
   â”‚                                         â”‚
   â”‚                                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Call GPT-4o-mini
   â”‚                                         â”‚                    with Agent Prompts
   â”‚                                         â”‚
   â”‚                                         â”œâ”€â”€> Execute Tools
   â”‚                                         â”‚    (calculate_*)
   â”‚                                         â”‚
   â”‚                                         â”œâ”€â”€> Generate Charts
   â”‚                                         â”‚    (Plotly JSON)
   â”‚                                         â”‚
   â”‚                                         â”œâ”€â”€> Create Executive Summary
   â”‚                                         â”‚
   â”‚                      <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Return JSON with:
   â”‚      Display Results                     â”‚ â€¢ plan_summaries
   â”‚      â€¢ Executive Summary                 â”‚ â€¢ visualizations
   â”‚      â€¢ Charts                            â”‚ â€¢ session_id
   â”‚      â€¢ Detailed Plans
   â”‚      â€¢ Chat Interface
   â”‚
   â”œâ”€â”€> Ask Question â”€â”€â”€â”€â”€â”€> Format Message â”€â”€> POST /api/chat/<id>
   â”‚                                         â”‚
   â”‚                                         â”œâ”€â”€> Build Context Prompt
   â”‚                                         â”‚    (user profile + plans)
   â”‚                                         â”‚
   â”‚                                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Call GPT-4o-mini
   â”‚                                         â”‚    with User Question
   â”‚                                         â”‚
   â”‚      <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Return JSON with:
   â”‚      Display Message                     â”‚ â€¢ message
   â”‚      Add to Chat History                 â”‚ â€¢ status
   â”‚
   â””â”€â”€> Download Plan â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> GET /api/export/<id>
                                             â”‚
                      <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Return JSON file
                                             â”‚ with full plan
```

---

## Agent Orchestration Workflow

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   User Financial Profile    â”‚
                    â”‚                             â”‚
                    â”‚ â€¢ Age: 45                   â”‚
                    â”‚ â€¢ Income: $100,000          â”‚
                    â”‚ â€¢ Savings: $250,000         â”‚
                    â”‚ â€¢ Selected Plans: [...]     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   OrchestratorAgent         â”‚
                    â”‚   .route(state)             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚              â”‚
                    â–¼              â–¼              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ RetirementAgent  â”‚ â”‚ Insurance   â”‚ â”‚ EstateAgent â”‚
        â”‚                  â”‚ â”‚ Agent       â”‚ â”‚             â”‚
        â”‚ IF SELECTED:     â”‚ â”‚             â”‚ â”‚ IF SELECTED:â”‚
        â”‚ â”œâ”€ Calculate     â”‚ â”‚ IF SELECTED:â”‚ â”‚ â”œâ”€ Calculateâ”‚
        â”‚ â”‚  retirement    â”‚ â”‚ â”œâ”€ Calculateâ”‚ â”‚ â”‚  estate   â”‚
        â”‚ â”‚  needs         â”‚ â”‚ â”‚  coverage â”‚ â”‚ â”‚  tax      â”‚
        â”‚ â”œâ”€ Project       â”‚ â”‚ â””â”€ Generate â”‚ â”‚ â”œâ”€ Calculateâ”‚
        â”‚ â”‚  savings       â”‚ â”‚   insurance â”‚ â”‚ â”‚  educationâ”‚
        â”‚ â””â”€ Asset         â”‚ â”‚   plan      â”‚ â”‚ â”‚  funding  â”‚
        â”‚   allocation    â”‚ â”‚             â”‚ â”‚ â””â”€ Generate â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   plan     â”‚
                                   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
        â”‚ WealthAgent      â”‚â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚
        â”‚ IF SELECTED:     â”‚
        â”‚ â”œâ”€ Asset         â”‚
        â”‚ â”‚  allocation    â”‚
        â”‚ â”œâ”€ Investment    â”‚
        â”‚ â”‚  strategy      â”‚
        â”‚ â””â”€ Risk profile  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Consolidate All Results    â”‚
        â”‚  â€¢ Merge recommendations    â”‚
        â”‚  â€¢ Create synergies         â”‚
        â”‚  â€¢ Identify priorities      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Executive Summary (GPT-4o)  â”‚
        â”‚ Combines all plans into     â”‚
        â”‚ cohesive financial strategy â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Return Integrated Results   â”‚
        â”‚ â”œâ”€ Executive Summary        â”‚
        â”‚ â”œâ”€ Individual Plans         â”‚
        â”‚ â”œâ”€ Visualizations (6)       â”‚
        â”‚ â””â”€ Session ID               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  USER BROWSER                           â”‚
â”‚  HTML5 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  CSS3  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                               â”‚
â”‚  JavaScript â”€â”€â”  â”‚     â”‚                               â”‚
â”‚               â”‚  â”‚     â”‚                               â”‚
â”‚          â”Œâ”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚          â”‚                         â”‚                    â”‚
â”‚          â–¼ Plotly.js (via CDN)    â”‚                    â”‚
â”‚     â”‚Interactive Chartsâ”‚           â”‚                   â”‚
â”‚                                    â”‚                    â”‚
â”‚  â–²                                â”‚                    â”‚
â”‚  â”‚                                â–¼                    â”‚
â”‚  â”‚         AJAX/REST API Calls                         â”‚
â”‚  â”‚         (JSON/HTTP)                                 â”‚
â”‚  â”‚                                                     â”‚
â””â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 FLASK SERVER                            â”‚
â”‚  (Python 3.8+)                                          â”‚
â”‚                                                         â”‚
â”‚  app.py                                                 â”‚
â”‚  â€¢ Route Requests                                       â”‚
â”‚  â€¢ Session Management                                   â”‚
â”‚  â€¢ Error Handling                                       â”‚
â”‚                    â”‚                                    â”‚
â”‚                    â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚   LangChain Integration      â”‚                       â”‚
â”‚  â”‚  agents.py                   â”‚                       â”‚
â”‚  â”‚  â€¢ RetirementAgent           â”‚                       â”‚
â”‚  â”‚  â€¢ InsuranceAgent            â”‚                       â”‚
â”‚  â”‚  â€¢ EstateAgent               â”‚                       â”‚
â”‚  â”‚  â€¢ WealthAgent               â”‚                       â”‚
â”‚  â”‚  â€¢ OrchestratorAgent         â”‚                       â”‚
â”‚  â”‚                              â”‚                       â”‚
â”‚  â”‚  Financial Tools:            â”‚                       â”‚
â”‚  â”‚  â€¢ 5 Calculation Functions   â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                    â”‚                                    â”‚
â”‚                    â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚   Visualization System       â”‚                       â”‚
â”‚  â”‚  visualizations.py           â”‚                       â”‚
â”‚  â”‚  â€¢ 6 Chart Types             â”‚                       â”‚
â”‚  â”‚  â€¢ Plotly JSON Output        â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                    â”‚                                    â”‚
â”‚                    â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚   Configuration System       â”‚                       â”‚
â”‚  â”‚  config.py                   â”‚                       â”‚
â”‚  â”‚  â€¢ Environment Variables     â”‚                       â”‚
â”‚  â”‚  â€¢ Flask Settings            â”‚                       â”‚
â”‚  â”‚  â€¢ Security Config           â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚
        â–¼                         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  OpenAI     â”‚        â”‚  python-     â”‚
   â”‚  API        â”‚        â”‚  dotenv      â”‚
   â”‚             â”‚        â”‚              â”‚
   â”‚ GPT-4o-mini â”‚        â”‚ .env Config  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Organization & Dependencies

```
web_app/
â”‚
â”œâ”€â”€ app.py
â”‚   â”œâ”€> imports config.py
â”‚   â”œâ”€> imports agents.py
â”‚   â”œâ”€> imports visualizations.py
â”‚   â”œâ”€> imports Flask, CORS, Session
â”‚   â””â”€> serves templates/index.html
â”‚
â”œâ”€â”€ agents.py
â”‚   â”œâ”€> imports LangChain
â”‚   â”œâ”€> imports OpenAI
â”‚   â”œâ”€> No internal dependencies
â”‚   â””â”€> Standalone module
â”‚
â”œâ”€â”€ visualizations.py
â”‚   â”œâ”€> imports Plotly
â”‚   â”œâ”€> imports NumPy
â”‚   â””â”€> Generates JSON charts
â”‚
â”œâ”€â”€ config.py
â”‚   â”œâ”€> imports python-dotenv
â”‚   â”œâ”€> Reads .env file
â”‚   â””â”€> Returns configuration
â”‚
â”œâ”€â”€ requirements.txt
â”‚   â””â”€> Lists all 12 packages
â”‚
â”œâ”€â”€ .env.example
â”‚   â””â”€> Template for .env
â”‚
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html
â”‚       â”œâ”€> imports static/js/app.js
â”‚       â””â”€> imports static/css/style.css
â”‚
â””â”€â”€ static/
    â”œâ”€â”€ js/
    â”‚   â””â”€â”€ app.js
    â”‚       â””â”€> Makes API calls to app.py
    â”‚
    â””â”€â”€ css/
        â””â”€â”€ style.css
            â””â”€> Styles index.html
```

---

## Runtime Flow - Complete Example

```
TIME    BROWSER                  SERVER                  OPENAI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

T0      User visits
        http://localhost:5000

T1      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
        GET /

T2                               Serve index.html
                                 + style.css
                                 + app.js

        <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

T3      Display form
        User selects plans &
        fills information

T4      Click "Generate Plan"
        â”€â”€â”€â”€POST /api/planning/startâ”€â”€â”€â”€>
        {selected_plans, user_info}

T5                               Create OrchestratorAgent

T6                               Route to agents
                                 (Retirement, Insurance)

T7                               Build prompts
                                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>

T8                                                    Process prompts
                                                      with GPT-4o-mini

T9                                                    Generate text
                                                      + recommendations

        <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

T10                             Execute tools
                                (calculate_*)

T11                             Generate charts
                                (Plotly JSON)

T12                             Build summary
                                <â”€â”€â”€â”€JSON responseâ”€â”€â”€â”€

        Receive results
        Display executive summary
        Render charts
        Show plan tabs

T13     User types question
        in chat

        â”€â”€â”€â”€POST /api/chat/<id>â”€>
        {message}

T14                             Build context
                                + conversation
                                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>

T15                                                    GPT-4o-mini
                                                      processes
                                                      with context

        <â”€â”€â”€â”€JSON responseâ”€â”€â”€â”€

T16     Display chat message
        Add to history

T17     User clicks "Download"
        â”€â”€â”€â”€GET /api/export/<id>â”€>

T18                             <â”€â”€â”€â”€JSON plan fileâ”€â”€â”€â”€

        Download as JSON file
```

---

## Feature Completeness Matrix

```
Component              â”‚ Status â”‚ Lines â”‚ Purpose
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Backend Framework      â”‚   âœ…   â”‚  160  â”‚ Flask REST API
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
AI Agents             â”‚   âœ…   â”‚  360  â”‚ Multi-agent orchestration
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Visualizations        â”‚   âœ…   â”‚  440  â”‚ 6 interactive charts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Configuration         â”‚   âœ…   â”‚  60   â”‚ Env-based config
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Frontend HTML         â”‚   âœ…   â”‚  200  â”‚ Single-page application
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Frontend CSS          â”‚   âœ…   â”‚  500  â”‚ Responsive styling
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Frontend JavaScript   â”‚   âœ…   â”‚  400  â”‚ API integration & UI logic
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Documentation         â”‚   âœ…   â”‚ 1500+ â”‚ 6 comprehensive guides
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Setup Automation      â”‚   âœ…   â”‚  150  â”‚ setup.py + startup scripts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Security/Config       â”‚   âœ…   â”‚   30  â”‚ .env + .gitignore
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

**Everything is integrated, tested, and ready to deploy!** ğŸš€
